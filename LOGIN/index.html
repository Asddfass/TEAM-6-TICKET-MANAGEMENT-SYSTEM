<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Login - Crimson's Threads</title>
  <link rel="stylesheet" href="CSS/signlogin.css">
</head>
<body>

  <a href="../" class="back-button">&#8592; Back</a>
  
  <div class="background-overlay"></div>

  <div class="auth-container">
    <form id="loginForm">
      <h2>LOGIN</h2>
      <input type="text" name="username" placeholder="Username" required />
      <input type="password" name="password" placeholder="Password" required />
      <button type="submit" class="auth-btn">LOGIN</button>
      <p>
        New user? <a href="../REGISTER/">Sign up</a>
      </p>
      <p id="loginError" class="error-message"></p>
    </form>
  </div>


  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script>
    $(document).ready(function () {
      $('#loginForm').on('submit', function (e) 
      {
        e.preventDefault();

        const loginBtn = $(this).find('button[type="submit"]');
        const username = $('input[name="username"]').val().trim();
        const password = $('input[name="password"]').val().trim();
        const errorMsg = $('#loginError');

        // Clear previous error message
        errorMsg.text('');

        // Disable button and show loading spinner
        loginBtn.prop('disabled', true);
        const originalBtnText = loginBtn.text();
        loginBtn.html('<span class="loading-spinner"></span> Logging in...');

        setTimeout(() => {
          if (username === 'admin' && password === 'admin123') 
          {
            window.location.href = '../ADMIN/index.html';
          } 
          else if (username === 'support' && password === 'support123') 
          {
            window.location.href = '../SUPPORTAGENT/index.html';
          } 
          else if (username === 'user' && password === 'user123') 
          {
            window.location.href = '../USER/index.html';
          } 
          else 
          {
            errorMsg.text('Invalid username or password');
            loginBtn.prop('disabled', false);
            loginBtn.html(originalBtnText);
          }
        }, 800);
      });
    });
  </script>
  
</body>
</html>
